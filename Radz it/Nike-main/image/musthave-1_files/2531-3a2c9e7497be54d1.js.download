"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2531],{22478:function(e,i,t){var n=t(52903),a=t(96047),o=t(76368),l=t(2784),r=t(68055),d=t(32331),u=t(66958),s=t(30496),v=t(2101),c=t(2491);let m=(0,l.forwardRef)((e,i)=>{let{src:t,width:m=v.TH,height:f=v.lG,htmlHeight:p,htmlWidth:k,isPriority:g=!1,preloadImage:Z=!1,extraImageParams:S={},is360:F=!1,...h}=e,b=(0,r.Z)(),E=(0,o.Z)(a.Z.web_pweb_max_image_dpr),U=null==t?void 0:t.includes("Placeholder"),P=v.yk.some(e=>null==t?void 0:t.includes(e)),I=U||!P||!t,{fallbackSrc:L,fallbackSrcSet:_}=(0,l.useMemo)(()=>{let{imageSrc:e,imageSrcSet:i}=(0,c.Z)({src:v.oI,dpr:2,width:m,height:f,maxDPR:Number(E||5),preferredImageFormat:b});return{fallbackSrc:e,fallbackSrcSet:i}},[f,E,b,m]),w=(0,l.useMemo)(()=>{if(I)return{};let{imageSrc:e,imageSrcSet:i}=(0,c.Z)({src:t,extraImageParams:S,width:m,height:f,maxDPR:Number(E||5),preferredImageFormat:b});return{srcSet:i,src:e}},[I,t,S,m,f,E,b]);return I?(0,n.tZ)(u.Ee,{referrerPolicy:"origin",backgroundImage:`url('${L}')`,htmlWidth:k,htmlHeight:p,srcSet:_,src:L,...h}):(0,n.BX)(l.Fragment,{children:[Z&&(null==w?void 0:w.srcSet)&&(null==w?void 0:w.src)&&(0,n.tZ)(d.Z,{srcSet:w.srcSet,src:w.src}),(0,n.tZ)(u.Ee,{ref:i,referrerPolicy:"origin",htmlWidth:k,htmlHeight:p,ignoreFallback:(null==w?void 0:w.src)||s.sk||F,fallbackSrc:L,fetchpriority:g?"high":void 0,...w,...h})]})});i.Z=m},2101:function(e,i,t){t.d(i,{TH:function(){return o},lG:function(){return l},oI:function(){return n},yk:function(){return a}});let n="https://stockx-assets.imgix.net/media/Product-Placeholder-Default-20210415.jpg?fit=fill&bg=FFFFFF&auto=format,compress&q=90&dpr=2&trim=color",a=[".net/",".io/",".com/"],o=576,l=o/3*2},2491:function(e,i,t){var n=t(66958);i.Z=e=>{let{src:i,preferredImageFormat:t,width:a,height:o,maxDPR:l=5,extraImageParams:r={}}=e,{client:d,path:u}=(0,n.jH)(i),s=u.split("?"),v=new URLSearchParams(s[1]??""),{q:c,...m}=Object.fromEntries(v.entries()),f=null==d?void 0:d.buildURL(s[0],{...m,...r,w:a,h:o,fm:t,q:60,auto:"compress"}),p={...m,...r,w:a,h:o,auto:"compress",fm:t},k=null==d?void 0:d.buildSrcSet(s[0],p,{variableQualities:{1:57,2:60,3:41,4:35,5:30},devicePixelRatios:[1,2,3,4,5].slice(0,l)});return{imageSrc:f,imageSrcSet:k}}},40272:function(e,i,t){var n=t(27259);let a=(0,n.Z)(()=>Promise.all([t.e(8448),t.e(5683),t.e(1769),t.e(9463),t.e(6087),t.e(6478)]).then(t.bind(t,8483)));i.Z=a},31576:function(e,i,t){var n=t(27259);let a=(0,n.Z)(()=>t.e(6830).then(t.bind(t,85997)));i.Z=a},74177:function(e,i,t){var n=t(27259);let a=(0,n.Z)(()=>Promise.all([t.e(8448),t.e(5683),t.e(1769),t.e(9463),t.e(6087),t.e(3642)]).then(t.bind(t,61827)));i.Z=a},6171:function(e,i,t){var n=t(17344),a=t(53476),o=t(23160),l=t(70837);i.Z=e=>{let i=(0,a.Zl)(o.Z),{mutatefn:t,data:r,error:d,loading:u}=(0,n.Z)(l.Z,{onSuccess(t){if(null==e?void 0:e.id){var n,a;let o=null==t?void 0:null===(a=t.updateListItems)||void 0===a?void 0:null===(n=a.items)||void 0===n?void 0:n.reduce((e,i)=>{var t;return(null==i?void 0:null===(t=i.item)||void 0===t?void 0:t.id)&&(e[i.item.id]=!!i.item.favorite),e},{});i({[null==e?void 0:e.id]:!0,...o})}}});return{data:r,error:d,loading:u,favoriteProduct:t}}},33903:function(e,i,t){var n=t(2784),a=t(60813),o=t(53476),l=t(76365),r=t(89565),d=t(85966),u=t(847),s=t(44517),v=t(12007),c=t(49820),m=t(85941),f=t(44969),p=t(668),k=t(96331),g=t(6171),Z=t(61394),S=t(23160);i.Z=e=>{let{product:i,onOpen:t,favoritedProduct:F,onClose:h,onPDPAddToListToggle:b,showAddToListInToast:E=!1}=e,{t:U}=(0,a.$G)(),P=(0,r.Z)(),I=(0,d.Z)(),L=(0,v.Z)(),{isOpen:_,onOpen:w,onClose:N}=(0,u.q)(),D=(0,s.pmc)(),O=(0,o.Zl)(S.Z),[y,C]=(0,n.useState)(!1),{milestone:R}=(0,k.Z)(),T=2===R?m.Z.PRODUCT_FAVORITED:m.Z.PRODUCT_FOLLOWED,{updateFavoriteProduct:V,loading:j,data:x,error:A}=(0,Z.Z)(),{favoriteProduct:M,loading:W,data:H,error:q}=(0,g.Z)(i);(0,n.useEffect)(()=>{var e;H&&(null==H?void 0:null===(e=H.updateListItems)||void 0===e?void 0:e.status)!==l.vn.FAILURE&&!W&&(null==h||h(),D({message:U("favorite_confirmation_message"),duration:6e3,isCloseable:!0,action:{text:E?U("pdp_add_to_portfolio_or_favorite_header"):U("favorite_confirmation_link"),handleClick:()=>{E?(D.closeAll(),null==b||b()):I.push(P("/favorites/all-favorites"))}}}))},[H,W]),(0,n.useEffect)(()=>{var e,t,n;if(x&&(null==x?void 0:null===(e=x.updateListItems)||void 0===e?void 0:e.status)!==l.vn.FAILURE&&!j&&(null==i?void 0:i.id)){let e=null==x?void 0:null===(n=x.updateListItems)||void 0===n?void 0:null===(t=n.items)||void 0===t?void 0:t.reduce((e,i)=>{var t;return(null==i?void 0:null===(t=i.item)||void 0===t?void 0:t.id)&&(e[i.item.id]=!!i.item.favorite),e},{});O({[null==i?void 0:i.id]:!1,...e}),null==h||h(),D({message:U("unfavorite_confirmation_message",{productTitle:null==i?void 0:i.title}),duration:6e3,isCloseable:!0,action:{text:U("unfavorite_confirmation_link"),handleClick:()=>handleUndo()}})}},[x,j]),(0,n.useEffect)(()=>{var e,i;(q||A||(null==H?void 0:null===(e=H.updateListItems)||void 0===e?void 0:e.status)===l.vn.FAILURE||(null==x?void 0:null===(i=x.updateListItems)||void 0===i?void 0:i.status)===l.vn.FAILURE)&&(null==h||h(),w())},[A,q,H,x]),(0,n.useEffect)(()=>{y&&(q||A?handleFavoriteUpdate():(N(),t()),C(!1))},[y]);let handleUndo=async()=>{var e,t;await favoriteProductFn(),trackFavoriteEvent({gaEvent:c.EVENTS.FollowProduct,segmentEvent:T,singleSizeVariant:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id})},favoriteProductFn=async()=>{var e,t;await M({input:{action:"ADD",items:[{productId:null==i?void 0:i.id,variantId:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id}]}})},unfavoriteProductFn=async()=>{var e,t;await V({input:{action:"DELETE",items:[{productId:null==i?void 0:i.id,variantId:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id}]}})},trackFavoriteEvent=e=>{let{gaEvent:t,segmentEvent:n,singleSizeVariant:a}=e;L(t,null==i?void 0:i.productCategory,null==i?void 0:i.title),(0,f.Z)(n,{vertical:null==i?void 0:i.productCategory,screenName:p.Z.PRODUCT,productUUID:null==i?void 0:i.id,skuUUID:a||null,productName:null==i?void 0:i.title})},handleFavoriteUpdate=async()=>{var e,t,n,a;F?(await unfavoriteProductFn(),trackFavoriteEvent({gaEvent:c.EVENTS.UnfollowProduct,segmentEvent:m.Z.PRODUCT_UNFOLLOWED,singleSizeVariant:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id})):(await favoriteProductFn(),trackFavoriteEvent({gaEvent:c.EVENTS.FollowProduct,segmentEvent:T,singleSizeVariant:null==i?void 0:null===(a=i.variants)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.id}))};return{handleFavoriteUpdate,favoriteLoading:W,unfavoriteLoading:j,setRetry:C,modalErrorIsOpen:_,modalErrorOnClose:N,modalErrorOnOpen:w}}},52740:function(e,i,t){var n=t(53476),a=t(23160);i.Z=(e,i)=>{let t=(0,n.sJ)(a.Z);return(null==t?void 0:t[e])??i}},61394:function(e,i,t){var n=t(17344),a=t(70837);i.Z=()=>{let{mutatefn:e,data:i,error:t,loading:o}=(0,n.Z)(a.Z);return{data:i,error:t,loading:o,updateFavoriteProduct:e}}},70837:function(e,i){i.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateFavoriteProduct"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"UpdateListItemsInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateListItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favorite"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:220,source:{body:"\n  mutation UpdateFavoriteProduct($input: UpdateListItemsInput) {\n    updateListItems(input: $input) {\n      status\n      items {\n        status\n        item {\n          id\n          favorite\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}},23160:function(e,i,t){var n,a,o=t(68683),l=t(53476);let r="favoritedProducts";(n=a||(a={})).List="List",n.DataState="DataState";let d=(0,o.Z)(r,Object.values(a)),u=(0,l.cn)({key:d[r].DataState.atom,default:{}}),s=(0,l.nZ)({key:d[r].List.atom,get:e=>{let{get:i}=e;return i(u)},set:(e,i)=>{let{set:t}=e;t(u,e=>({...e,...i}))}});i.Z=s},68055:function(e,i,t){var n,a,o=t(2784),l=t(41666);(n=a||(a={})).jpg="jpg",n.webp="webp",n.avif="avif";let getMajorVersion=e=>{var i;return parseInt((null===(i=e.split("."))||void 0===i?void 0:i[0])??"0",10)},canUseAvif=(e,i,t)=>"Safari"===e&&i>=16||"Chrome"===e&&i>90&&"iOS"!==t||"Firefox"===e&&i>93&&"iOS"!==t||"Opera"===e&&i>71&&"iOS"!==t,canUseWebp=(e,i,t,n,a)=>"Firefox"===e&&i>65&&i<93||"Safari"===e&&i>=14&&"desktop"!==a?"webp":"Chrome"===e&&i>33&&"iOS"!==t||("Chrome"===e&&"desktop"!==a&&"iOS"===t&&n>=14||"Safari"===e&&i>=15&&"desktop"===a||"Microsoft Edge"===e&&i>=18?"webp":void 0);i.Z=()=>{let e=(0,l.o)();return(0,o.useMemo)(()=>{if(!e)return"jpg";let i=e.browser.name,t=getMajorVersion(e.browser.version??""),n=e.os.name,a=getMajorVersion(e.os.version??""),o=e.platform.type;return i&&n&&o?canUseAvif(i,t,n)?"avif":canUseWebp(i,t,n,a,o)?"webp":"jpg":"webp"},[e])}}}]);